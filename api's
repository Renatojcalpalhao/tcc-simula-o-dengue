# api_prefeitura_sp.py
import requests
import csv
import json

def get_casos_dengue_santo_amaro():
    """Busca casos reais de dengue em Santo Amaro"""
    try:
        # API de saúde municipal (exemplo)
        url = "https://api.prefeitura.sp.gov.br/saude/v1/dengue"
        params = {
            "distrito": "SANTO AMARO",
            "data_inicio": "2024-01-01",
            "data_fim": "2024-12-31"
        }
        
        response = requests.get(url, headers={"Authorization": "Bearer SEU_TOKEN"})
        dados = response.json()
        
        return dados
        
    except Exception as e:
        print(f"Erro API dengue: {e}")
        return {"casos": [], "total": 0}

def get_dados_entomologicos():
    """Dados de infestação de mosquitos"""
    try:
        # LIRAa - Levantamento Rápido de Índices para Aedes aegypti
        url = "https://api.prefeitura.sp.gov.br/vigilancia/liraa"
        response = requests.get(url)
        return response.json()
    except:
        # Dados simulados baseados em históricos
        return {
            "santo_amaro": {
                "indice_infestacao": 2.8,  # 2.8% - alto risco
                "criadouros_principais": ["Domésticos", "Comerciais"],
                "data_coleta": "2024-01-15"
            }
        }